<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/sigmund/bench.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/sigmund/bench.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">69.42</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">275</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">64.68</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.51</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// different ways to id objects
// use a req/res pair, since it&#039;s crazy deep and cyclical

// sparseFE10 and sigmund are usually pretty close, which is to be expected,
// since they are essentially the same algorithm, except that sigmund handles
// regular expression objects properly.


var http = require(&#039;http&#039;)
var util = require(&#039;util&#039;)
var sigmund = require(&#039;./sigmund.js&#039;)
var sreq, sres, creq, cres, test

http.createServer(function (q, s) {
  sreq = q
  sres = s
  sres.end(&#039;ok&#039;)
  this.close(function () { setTimeout(function () {
    start()
  }, 200) })
}).listen(1337, function () {
  creq = http.get({ port: 1337 })
  creq.on(&#039;response&#039;, function (s) { cres = s })
})

function start () {
  test = [sreq, sres, creq, cres]
  // test = sreq
  // sreq.sres = sres
  // sreq.creq = creq
  // sreq.cres = cres

  for (var i in exports.compare) {
    console.log(i)
    var hash = exports.compare[i]()
    console.log(hash)
    console.log(hash.length)
    console.log(&#039;&#039;)
  }

  require(&#039;bench&#039;).runMain()
}

function customWs (obj, md, d) {
  d = d || 0
  var to = typeof obj
  if (to === &#039;undefined&#039; || to === &#039;function&#039; || to === null) return &#039;&#039;
  if (d &gt; md || !obj || to !== &#039;object&#039;) return (&#039;&#039; + obj).replace(/[\n ]+/g, &#039;&#039;)

  if (Array.isArray(obj)) {
    return obj.map(function (i, _, __) {
      return customWs(i, md, d + 1)
    }).reduce(function (a, b) { return a + b }, &#039;&#039;)
  }

  var keys = Object.keys(obj)
  return keys.map(function (k, _, __) {
    return k + &#039;:&#039; + customWs(obj[k], md, d + 1)
  }).reduce(function (a, b) { return a + b }, &#039;&#039;)
}

function custom (obj, md, d) {
  d = d || 0
  var to = typeof obj
  if (to === &#039;undefined&#039; || to === &#039;function&#039; || to === null) return &#039;&#039;
  if (d &gt; md || !obj || to !== &#039;object&#039;) return &#039;&#039; + obj

  if (Array.isArray(obj)) {
    return obj.map(function (i, _, __) {
      return custom(i, md, d + 1)
    }).reduce(function (a, b) { return a + b }, &#039;&#039;)
  }

  var keys = Object.keys(obj)
  return keys.map(function (k, _, __) {
    return k + &#039;:&#039; + custom(obj[k], md, d + 1)
  }).reduce(function (a, b) { return a + b }, &#039;&#039;)
}

function sparseFE2 (obj, maxDepth) {
  var seen = []
  var soFar = &#039;&#039;
  function ch (v, depth) {
    if (depth &gt; maxDepth) return
    if (typeof v === &#039;function&#039; || typeof v === &#039;undefined&#039;) return
    if (typeof v !== &#039;object&#039; || !v) {
      soFar += v
      return
    }
    if (seen.indexOf(v) !== -1 || depth === maxDepth) return
    seen.push(v)
    soFar += &#039;{&#039;
    Object.keys(v).forEach(function (k, _, __) {
      // pseudo-private values.  skip those.
      if (k.charAt(0) === &#039;_&#039;) return
      var to = typeof v[k]
      if (to === &#039;function&#039; || to === &#039;undefined&#039;) return
      soFar += k + &#039;:&#039;
      ch(v[k], depth + 1)
    })
    soFar += &#039;}&#039;
  }
  ch(obj, 0)
  return soFar
}

function sparseFE (obj, maxDepth) {
  var seen = []
  var soFar = &#039;&#039;
  function ch (v, depth) {
    if (depth &gt; maxDepth) return
    if (typeof v === &#039;function&#039; || typeof v === &#039;undefined&#039;) return
    if (typeof v !== &#039;object&#039; || !v) {
      soFar += v
      return
    }
    if (seen.indexOf(v) !== -1 || depth === maxDepth) return
    seen.push(v)
    soFar += &#039;{&#039;
    Object.keys(v).forEach(function (k, _, __) {
      // pseudo-private values.  skip those.
      if (k.charAt(0) === &#039;_&#039;) return
      var to = typeof v[k]
      if (to === &#039;function&#039; || to === &#039;undefined&#039;) return
      soFar += k
      ch(v[k], depth + 1)
    })
  }
  ch(obj, 0)
  return soFar
}

function sparse (obj, maxDepth) {
  var seen = []
  var soFar = &#039;&#039;
  function ch (v, depth) {
    if (depth &gt; maxDepth) return
    if (typeof v === &#039;function&#039; || typeof v === &#039;undefined&#039;) return
    if (typeof v !== &#039;object&#039; || !v) {
      soFar += v
      return
    }
    if (seen.indexOf(v) !== -1 || depth === maxDepth) return
    seen.push(v)
    soFar += &#039;{&#039;
    for (var k in v) {
      // pseudo-private values.  skip those.
      if (k.charAt(0) === &#039;_&#039;) continue
      var to = typeof v[k]
      if (to === &#039;function&#039; || to === &#039;undefined&#039;) continue
      soFar += k
      ch(v[k], depth + 1)
    }
  }
  ch(obj, 0)
  return soFar
}

function noCommas (obj, maxDepth) {
  var seen = []
  var soFar = &#039;&#039;
  function ch (v, depth) {
    if (depth &gt; maxDepth) return
    if (typeof v === &#039;function&#039; || typeof v === &#039;undefined&#039;) return
    if (typeof v !== &#039;object&#039; || !v) {
      soFar += v
      return
    }
    if (seen.indexOf(v) !== -1 || depth === maxDepth) return
    seen.push(v)
    soFar += &#039;{&#039;
    for (var k in v) {
      // pseudo-private values.  skip those.
      if (k.charAt(0) === &#039;_&#039;) continue
      var to = typeof v[k]
      if (to === &#039;function&#039; || to === &#039;undefined&#039;) continue
      soFar += k + &#039;:&#039;
      ch(v[k], depth + 1)
    }
    soFar += &#039;}&#039;
  }
  ch(obj, 0)
  return soFar
}


function flatten (obj, maxDepth) {
  var seen = []
  var soFar = &#039;&#039;
  function ch (v, depth) {
    if (depth &gt; maxDepth) return
    if (typeof v === &#039;function&#039; || typeof v === &#039;undefined&#039;) return
    if (typeof v !== &#039;object&#039; || !v) {
      soFar += v
      return
    }
    if (seen.indexOf(v) !== -1 || depth === maxDepth) return
    seen.push(v)
    soFar += &#039;{&#039;
    for (var k in v) {
      // pseudo-private values.  skip those.
      if (k.charAt(0) === &#039;_&#039;) continue
      var to = typeof v[k]
      if (to === &#039;function&#039; || to === &#039;undefined&#039;) continue
      soFar += k + &#039;:&#039;
      ch(v[k], depth + 1)
      soFar += &#039;,&#039;
    }
    soFar += &#039;}&#039;
  }
  ch(obj, 0)
  return soFar
}

exports.compare =
{
  // &#039;custom 2&#039;: function () {
  //   return custom(test, 2, 0)
  // },
  // &#039;customWs 2&#039;: function () {
  //   return customWs(test, 2, 0)
  // },
  &#039;JSON.stringify (guarded)&#039;: function () {
    var seen = []
    return JSON.stringify(test, function (k, v) {
      if (typeof v !== &#039;object&#039; || !v) return v
      if (seen.indexOf(v) !== -1) return undefined
      seen.push(v)
      return v
    })
  },

  &#039;flatten 10&#039;: function () {
    return flatten(test, 10)
  },

  // &#039;flattenFE 10&#039;: function () {
  //   return flattenFE(test, 10)
  // },

  &#039;noCommas 10&#039;: function () {
    return noCommas(test, 10)
  },

  &#039;sparse 10&#039;: function () {
    return sparse(test, 10)
  },

  &#039;sparseFE 10&#039;: function () {
    return sparseFE(test, 10)
  },

  &#039;sparseFE2 10&#039;: function () {
    return sparseFE2(test, 10)
  },

  sigmund: function() {
    return sigmund(test, 10)
  },


  // &#039;util.inspect 1&#039;: function () {
  //   return util.inspect(test, false, 1, false)
  // },
  // &#039;util.inspect undefined&#039;: function () {
  //   util.inspect(test)
  // },
  // &#039;util.inspect 2&#039;: function () {
  //   util.inspect(test, false, 2, false)
  // },
  // &#039;util.inspect 3&#039;: function () {
  //   util.inspect(test, false, 3, false)
  // },
  // &#039;util.inspect 4&#039;: function () {
  //   util.inspect(test, false, 4, false)
  // },
  // &#039;util.inspect Infinity&#039;: function () {
  //   util.inspect(test, false, Infinity, false)
  // }
}

/** results
**/</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
