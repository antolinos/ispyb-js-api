<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - node_modules/underscore.string/test/test_underscore/vendor/jslitmus.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>node_modules/underscore.string/test/test_underscore/vendor/jslitmus.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">61.31</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">643</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">70.48</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">5.37</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// JSLitmus.js
//
// History:
//   2008-10-27: Initial release
//   2008-11-09: Account for iteration loop overhead
//   2008-11-13: Added OS detection
//   2009-02-25: Create tinyURL automatically, shift-click runs tests in reverse
//
// Copyright (c) 2008-2009, Robert Kieffer
// All Rights Reserved
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the
// Software), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// THE SOFTWARE IS PROVIDED AS IS, WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

(function() {
  // Private methods and state

  // Get platform info but don&#039;t go crazy trying to recognize everything
  // that&#039;s out there.  This is just for the major platforms and OSes.
  var platform = &#039;unknown platform&#039;, ua = navigator.userAgent;

  // Detect OS
  var oses = [&#039;Windows&#039;,&#039;iPhone OS&#039;,&#039;(Intel |PPC )?Mac OS X&#039;,&#039;Linux&#039;].join(&#039;|&#039;);
  var pOS = new RegExp(&#039;((&#039; + oses + &#039;) [^ \);]*)&#039;).test(ua) ? RegExp.$1 : null;
  if (!pOS) pOS = new RegExp(&#039;((&#039; + oses + &#039;)[^ \);]*)&#039;).test(ua) ? RegExp.$1 : null;

  // Detect browser
  var pName = /(Chrome|MSIE|Safari|Opera|Firefox)/.test(ua) ? RegExp.$1 : null;

  // Detect version
  var vre = new RegExp(&#039;(Version|&#039; + pName + &#039;)[ \/]([^ ;]*)&#039;);
  var pVersion = (pName &amp;&amp; vre.test(ua)) ? RegExp.$2 : null;
  var platform = (pOS &amp;&amp; pName &amp;&amp; pVersion) ? pName + &#039; &#039;  + pVersion + &#039; on &#039; + pOS : &#039;unknown platform&#039;;

  /**
  * A smattering of methods that are needed to implement the JSLitmus testbed.
  */
  var jsl = {
    /**
    * Enhanced version of escape()
    */
    escape: function(s) {
      s = s.replace(/,/g, &#039;\\,&#039;);
      s = escape(s);
      s = s.replace(/\+/g, &#039;%2b&#039;);
      s = s.replace(/ /g, &#039;+&#039;);
      return s;
    },

    /**
    * Get an element by ID.
    */
    $: function(id) {
      return document.getElementById(id);
    },

    /**
    * Null function
    */
    F: function() {},

    /**
    * Set the status shown in the UI
    */
    status: function(msg) {
      var el = jsl.$(&#039;jsl_status&#039;);
      if (el) el.innerHTML = msg || &#039;&#039;;
    },

    /**
    * Convert a number to an abbreviated string like, &quot;15K&quot; or &quot;10M&quot;
    */
    toLabel: function(n) {
      if (n == Infinity) {
        return &#039;Infinity&#039;;
      } else if (n &gt; 1e9) {
        n = Math.round(n/1e8);
        return n/10 + &#039;B&#039;;
      } else if (n &gt; 1e6) {
        n = Math.round(n/1e5);
        return n/10 + &#039;M&#039;;
      } else if (n &gt; 1e3) {
        n = Math.round(n/1e2);
        return n/10 + &#039;K&#039;;
      }
      return n;
    },

    /**
    * Copy properties from src to dst
    */
    extend: function(dst, src) {
      for (var k in src) dst[k] = src[k]; return dst;
    },

    /**
    * Like Array.join(), but for the key-value pairs in an object
    */
    join: function(o, delimit1, delimit2) {
      if (o.join) return o.join(delimit1);  // If it&#039;s an array
      var pairs = [];
      for (var k in o) pairs.push(k + delimit1 + o[k]);
      return pairs.join(delimit2);
    },

    /**
    * Array#indexOf isn&#039;t supported in IE, so we use this as a cross-browser solution
    */
    indexOf: function(arr, o) {
      if (arr.indexOf) return arr.indexOf(o);
      for (var i = 0; i &lt; this.length; i++) if (arr[i] === o) return i;
      return -1;
    }
  };

  /**
  * Test manages a single test (created with
  * JSLitmus.test())
  * 
  * @private
  */
  var Test = function (name, f) {
    if (!f) throw new Error(&#039;Undefined test function&#039;);
    if (!(/function[^\(]*\(([^,\)]*)/).test(f.toString())) {
      throw new Error(&#039;&quot;&#039; + name + &#039;&quot; test: Test is not a valid Function object&#039;);
    }
    this.loopArg = RegExp.$1;
    this.name = name;
    this.f = f;
  };
  
  jsl.extend(Test, /** @lends Test */ {
    /** Calibration tests for establishing iteration loop overhead */
    CALIBRATIONS: [
      new Test(&#039;calibrating loop&#039;, function(count) {while (count--);}),
      new Test(&#039;calibrating function&#039;, jsl.F)
    ],

    /**
    * Run calibration tests.  Returns true if calibrations are not yet
    * complete (in which case calling code should run the tests yet again).
    * onCalibrated - Callback to invoke when calibrations have finished
    */
    calibrate: function(onCalibrated) {
      for (var i = 0; i &lt; Test.CALIBRATIONS.length; i++) { 
        var cal = Test.CALIBRATIONS[i];
        if (cal.running) return true;
        if (!cal.count) {
          cal.isCalibration = true;
          cal.onStop = onCalibrated;
          //cal.MIN_TIME = .1; // Do calibrations quickly
          cal.run(2e4);
          return true;
        }
      }
      return false;
    }
  });

  jsl.extend(Test.prototype, {/** @lends Test.prototype */
    /** Initial number of iterations */
    INIT_COUNT: 10,
    /** Max iterations allowed (i.e. used to detect bad looping functions) */
    MAX_COUNT: 1e9,
    /** Minimum time a test should take to get valid results (secs) */
    MIN_TIME: .5,

    /** Callback invoked when test state changes */
    onChange: jsl.F,

    /** Callback invoked when test is finished */
    onStop: jsl.F,

    /**
     * Reset test state
     */
    reset: function() {
      delete this.count;
      delete this.time;
      delete this.running;
      delete this.error;
    },

    /**
    * Run the test (in a timeout). We use a timeout to make sure the browser
    * has a chance to finish rendering any UI changes we&#039;ve made, like
    * updating the status message.
    */
    run: function(count) {
      count = count || this.INIT_COUNT;
      jsl.status(this.name + &#039; x &#039; + count);
      this.running = true;
      var me = this;
      setTimeout(function() {me._run(count);}, 200);
    },

    /**
     * The nuts and bolts code that actually runs a test
     */
    _run: function(count) {
      var me = this;

      // Make sure calibration tests have run
      if (!me.isCalibration &amp;&amp; Test.calibrate(function() {me.run(count);})) return;
      this.error = null;

      try {
        var start, f = this.f, now, i = count;

        // Start the timer
        start = new Date();

        // Now for the money shot.  If this is a looping function ...
        if (this.loopArg) {
          // ... let it do the iteration itself
          f(count);
        } else {
          // ... otherwise do the iteration for it
          while (i--) f();
        }

        // Get time test took (in secs)
        this.time = Math.max(1,new Date() - start)/1000;

        // Store iteration count and per-operation time taken
        this.count = count;
        this.period = this.time/count;

        // Do we need to do another run?
        this.running = this.time &lt;= this.MIN_TIME;

        // ... if so, compute how many times we should iterate
        if (this.running) {
          // Bump the count to the nearest power of 2
          var x = this.MIN_TIME/this.time;
          var pow = Math.pow(2, Math.max(1, Math.ceil(Math.log(x)/Math.log(2))));
          count *= pow;
          if (count &gt; this.MAX_COUNT) {
            throw new Error(&#039;Max count exceeded.  If this test uses a looping function, make sure the iteration loop is working properly.&#039;);
          }
        }
      } catch (e) {
        // Exceptions are caught and displayed in the test UI
        this.reset();
        this.error = e;
      }

      // Figure out what to do next
      if (this.running) {
        me.run(count);
      } else {
        jsl.status(&#039;&#039;);
        me.onStop(me);
      }

      // Finish up
      this.onChange(this);
    },

    /**
    * Get the number of operations per second for this test.
    * 
    * @param normalize if true, iteration loop overhead taken into account
    */
    getHz: function(/**Boolean*/ normalize) {
      var p = this.period;

      // Adjust period based on the calibration test time
      if (normalize &amp;&amp; !this.isCalibration) {
        var cal = Test.CALIBRATIONS[this.loopArg ? 0 : 1];

        // If the period is within 20% of the calibration time, then zero the
        // it out
        p = p &lt; cal.period*1.2 ? 0 : p - cal.period;
      }

      return Math.round(1/p);
    },

    /**
    * Get a friendly string describing the test
    */
    toString: function() {
      return this.name + &#039; - &#039;  + this.time/this.count + &#039; secs&#039;;
    }
  });

  // CSS we need for the UI
  var STYLESHEET = &#039;&lt;style&gt; \
    #jslitmus {font-family:sans-serif; font-size: 12px;} \
    #jslitmus a {text-decoration: none;} \
    #jslitmus a:hover {text-decoration: underline;} \
    #jsl_status { \
      margin-top: 10px; \
      font-size: 10px; \
      color: #888; \
    } \
    A IMG  {border:none} \
    #test_results { \
      margin-top: 10px; \
      font-size: 12px; \
      font-family: sans-serif; \
      border-collapse: collapse; \
      border-spacing: 0px; \
    } \
    #test_results th, #test_results td { \
      border: solid 1px #ccc; \
      vertical-align: top; \
      padding: 3px; \
    } \
    #test_results th { \
      vertical-align: bottom; \
      background-color: #ccc; \
      padding: 1px; \
      font-size: 10px; \
    } \
    #test_results #test_platform { \
      color: #444; \
      text-align:center; \
    } \
    #test_results .test_row { \
      color: #006; \
      cursor: pointer; \
    } \
    #test_results .test_nonlooping { \
      border-left-style: dotted; \
      border-left-width: 2px; \
    } \
    #test_results .test_looping { \
      border-left-style: solid; \
      border-left-width: 2px; \
    } \
    #test_results .test_name {white-space: nowrap;} \
    #test_results .test_pending { \
    } \
    #test_results .test_running { \
      font-style: italic; \
    } \
    #test_results .test_done {} \
    #test_results .test_done { \
      text-align: right; \
      font-family: monospace; \
    } \
    #test_results .test_error {color: #600;} \
    #test_results .test_error .error_head {font-weight:bold;} \
    #test_results .test_error .error_body {font-size:85%;} \
    #test_results .test_row:hover td { \
      background-color: #ffc; \
      text-decoration: underline; \
    } \
    #chart { \
      margin: 10px 0px; \
      width: 250px; \
    } \
    #chart img { \
      border: solid 1px #ccc; \
      margin-bottom: 5px; \
    } \
    #chart #tiny_url { \
      height: 40px; \
      width: 250px; \
    } \
    #jslitmus_credit { \
      font-size: 10px; \
      color: #888; \
      margin-top: 8px; \
    } \
    &lt;/style&gt;&#039;;

  // HTML markup for the UI
  var MARKUP = &#039;&lt;div id=&quot;jslitmus&quot;&gt; \
      &lt;button onclick=&quot;JSLitmus.runAll(event)&quot;&gt;Run Tests&lt;/button&gt; \
      &lt;button id=&quot;stop_button&quot; disabled=&quot;disabled&quot; onclick=&quot;JSLitmus.stop()&quot;&gt;Stop Tests&lt;/button&gt; \
      &lt;br \&gt; \
      &lt;br \&gt; \
      &lt;input type=&quot;checkbox&quot; style=&quot;vertical-align: middle&quot; id=&quot;test_normalize&quot; checked=&quot;checked&quot; onchange=&quot;JSLitmus.renderAll()&quot;&quot;&gt; Normalize results \
      &lt;table id=&quot;test_results&quot;&gt; \
        &lt;colgroup&gt; \
          &lt;col /&gt; \
          &lt;col width=&quot;100&quot; /&gt; \
        &lt;/colgroup&gt; \
        &lt;tr&gt;&lt;th id=&quot;test_platform&quot; colspan=&quot;2&quot;&gt;&#039; + platform + &#039;&lt;/th&gt;&lt;/tr&gt; \
        &lt;tr&gt;&lt;th&gt;Test&lt;/th&gt;&lt;th&gt;Ops/sec&lt;/th&gt;&lt;/tr&gt; \
        &lt;tr id=&quot;test_row_template&quot; class=&quot;test_row&quot; style=&quot;display:none&quot;&gt; \
          &lt;td class=&quot;test_name&quot;&gt;&lt;/td&gt; \
          &lt;td class=&quot;test_result&quot;&gt;Ready&lt;/td&gt; \
        &lt;/tr&gt; \
      &lt;/table&gt; \
      &lt;div id=&quot;jsl_status&quot;&gt;&lt;/div&gt; \
      &lt;div id=&quot;chart&quot; style=&quot;display:none&quot;&gt; \
      &lt;a id=&quot;chart_link&quot; target=&quot;_blank&quot;&gt;&lt;img id=&quot;chart_image&quot;&gt;&lt;/a&gt; \
      TinyURL (for chart): \
      &lt;iframe id=&quot;tiny_url&quot; frameBorder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;&quot;&gt;&lt;/iframe&gt; \
      &lt;/div&gt; \
      &lt;a id=&quot;jslitmus_credit&quot; title=&quot;JSLitmus home page&quot; href=&quot;http://code.google.com/p/jslitmus&quot; target=&quot;_blank&quot;&gt;Powered by JSLitmus&lt;/a&gt; \
    &lt;/div&gt;&#039;;

  /**
   * The public API for creating and running tests
   */
  window.JSLitmus = {
    /** The list of all tests that have been registered with JSLitmus.test */
    _tests: [],
    /** The queue of tests that need to be run */
    _queue: [],

    /**
    * The parsed query parameters the current page URL.  This is provided as a
    * convenience for test functions - it&#039;s not used by JSLitmus proper
    */
    params: {},

    /**
     * Initialize
     */
    _init: function() {
      // Parse query params into JSLitmus.params[] hash
      var match = (location + &#039;&#039;).match(/([^?#]*)(#.*)?$/);
      if (match) {
        var pairs = match[1].split(&#039;&amp;&#039;);
        for (var i = 0; i &lt; pairs.length; i++) {
          var pair = pairs[i].split(&#039;=&#039;);
          if (pair.length &gt; 1) {
            var key = pair.shift();
            var value = pair.length &gt; 1 ? pair.join(&#039;=&#039;) : pair[0];
            this.params[key] = value;
          }
        }
      }

      // Write out the stylesheet.  We have to do this here because IE
      // doesn&#039;t honor sheets written after the document has loaded.
      document.write(STYLESHEET);

      // Setup the rest of the UI once the document is loaded
      if (window.addEventListener) {
        window.addEventListener(&#039;load&#039;, this._setup, false);
      } else if (document.addEventListener) {
        document.addEventListener(&#039;load&#039;, this._setup, false);
      } else if (window.attachEvent) {
        window.attachEvent(&#039;onload&#039;, this._setup);
      }

      return this;
    },

    /**
     * Set up the UI
     */
    _setup: function() {
      var el = jsl.$(&#039;jslitmus_container&#039;);
      if (!el) document.body.appendChild(el = document.createElement(&#039;div&#039;));

      el.innerHTML = MARKUP;

      // Render the UI for all our tests
      for (var i=0; i &lt; JSLitmus._tests.length; i++)
        JSLitmus.renderTest(JSLitmus._tests[i]);
    },

    /**
     * (Re)render all the test results
     */
    renderAll: function() {
      for (var i = 0; i &lt; JSLitmus._tests.length; i++)
        JSLitmus.renderTest(JSLitmus._tests[i]);
      JSLitmus.renderChart();
    },

    /**
     * (Re)render the chart graphics
     */
    renderChart: function() {
      var url = JSLitmus.chartUrl();
      jsl.$(&#039;chart_link&#039;).href = url;
      jsl.$(&#039;chart_image&#039;).src = url;
      jsl.$(&#039;chart&#039;).style.display = &#039;&#039;;

      // Update the tiny URL
      jsl.$(&#039;tiny_url&#039;).src = &#039;http://tinyurl.com/api-create.php?url=&#039;+escape(url);
    },

    /**
     * (Re)render the results for a specific test
     */
    renderTest: function(test) {
      // Make a new row if needed
      if (!test._row) {
        var trow = jsl.$(&#039;test_row_template&#039;);
        if (!trow) return;

        test._row = trow.cloneNode(true);
        test._row.style.display = &#039;&#039;;
        test._row.id = &#039;&#039;;
        test._row.onclick = function() {JSLitmus._queueTest(test);};
        test._row.title = &#039;Run &#039; + test.name + &#039; test&#039;;
        trow.parentNode.appendChild(test._row);
        test._row.cells[0].innerHTML = test.name;
      }

      var cell = test._row.cells[1];
      var cns = [test.loopArg ? &#039;test_looping&#039; : &#039;test_nonlooping&#039;];

      if (test.error) {
        cns.push(&#039;test_error&#039;);
        cell.innerHTML = 
        &#039;&lt;div class=&quot;error_head&quot;&gt;&#039; + test.error + &#039;&lt;/div&gt;&#039; +
        &#039;&lt;ul class=&quot;error_body&quot;&gt;&lt;li&gt;&#039; +
          jsl.join(test.error, &#039;: &#039;, &#039;&lt;/li&gt;&lt;li&gt;&#039;) +
          &#039;&lt;/li&gt;&lt;/ul&gt;&#039;;
      } else {
        if (test.running) {
          cns.push(&#039;test_running&#039;);
          cell.innerHTML = &#039;running&#039;;
        } else if (jsl.indexOf(JSLitmus._queue, test) &gt;= 0) {
          cns.push(&#039;test_pending&#039;);
          cell.innerHTML = &#039;pending&#039;;
        } else if (test.count) {
          cns.push(&#039;test_done&#039;);
          var hz = test.getHz(jsl.$(&#039;test_normalize&#039;).checked);
          cell.innerHTML = hz != Infinity ? hz : &#039;&amp;infin;&#039;;
        } else {
          cell.innerHTML = &#039;ready&#039;;
        }
      }
      cell.className = cns.join(&#039; &#039;);
    },

    /**
     * Create a new test
     */
    test: function(name, f) {
      // Create the Test object
      var test = new Test(name, f);
      JSLitmus._tests.push(test);

      // Re-render if the test state changes
      test.onChange = JSLitmus.renderTest;

      // Run the next test if this one finished
      test.onStop = function(test) {
        if (JSLitmus.onTestFinish) JSLitmus.onTestFinish(test);
        JSLitmus.currentTest = null;
        JSLitmus._nextTest();
      };

      // Render the new test
      this.renderTest(test);
    },

    /**
     * Add all tests to the run queue
     */
    runAll: function(e) {
      e = e || window.event;
      var reverse = e &amp;&amp; e.shiftKey, len = JSLitmus._tests.length;
      for (var i = 0; i &lt; len; i++) {
        JSLitmus._queueTest(JSLitmus._tests[!reverse ? i : (len - i - 1)]);
      }
    },

    /**
     * Remove all tests from the run queue.  The current test has to finish on
     * it&#039;s own though
     */
    stop: function() {
      while (JSLitmus._queue.length) {
        var test = JSLitmus._queue.shift();
        JSLitmus.renderTest(test);
      }
    },

    /**
     * Run the next test in the run queue
     */
    _nextTest: function() {
      if (!JSLitmus.currentTest) {
        var test = JSLitmus._queue.shift();
        if (test) {
          jsl.$(&#039;stop_button&#039;).disabled = false;
          JSLitmus.currentTest = test;
          test.run();
          JSLitmus.renderTest(test);
          if (JSLitmus.onTestStart) JSLitmus.onTestStart(test);
        } else {
          jsl.$(&#039;stop_button&#039;).disabled = true;
          JSLitmus.renderChart();
        }
      }
    },

    /**
     * Add a test to the run queue
     */
    _queueTest: function(test) {
      if (jsl.indexOf(JSLitmus._queue, test) &gt;= 0) return;
      JSLitmus._queue.push(test);
      JSLitmus.renderTest(test);
      JSLitmus._nextTest();
    },

    /**
     * Generate a Google Chart URL that shows the data for all tests
     */
    chartUrl: function() {
      var n = JSLitmus._tests.length, markers = [], data = [];
      var d, min = 0, max = -1e10;
      var normalize = jsl.$(&#039;test_normalize&#039;).checked;

      // Gather test data
      for (var i=0; i &lt; JSLitmus._tests.length; i++) {
        var test = JSLitmus._tests[i];
        if (test.count) {
          var hz = test.getHz(normalize);
          var v = hz != Infinity ? hz : 0;
          data.push(v);
          markers.push(&#039;t&#039; + jsl.escape(test.name + &#039;(&#039; + jsl.toLabel(hz)+ &#039;)&#039;) + &#039;,000000,0,&#039; +
            markers.length + &#039;,10&#039;);
          max = Math.max(v, max);
        }
      }
      if (markers.length &lt;= 0) return null;

      // Build chart title
      var title = document.getElementsByTagName(&#039;title&#039;);
      title = (title &amp;&amp; title.length) ? title[0].innerHTML : null;
      var chart_title = [];
      if (title) chart_title.push(title);
      chart_title.push(&#039;Ops/sec (&#039; + platform + &#039;)&#039;);

      // Build labels
      var labels = [jsl.toLabel(min), jsl.toLabel(max)];

      var w = 250, bw = 15;
      var bs = 5;
      var h = markers.length*(bw + bs) + 30 + chart_title.length*20;

      var params = {
        chtt: escape(chart_title.join(&#039;|&#039;)),
        chts: &#039;000000,10&#039;,
        cht: &#039;bhg&#039;,                     // chart type
        chd: &#039;t:&#039; + data.join(&#039;,&#039;),     // data set
        chds: min + &#039;,&#039; + max,          // max/min of data
        chxt: &#039;x&#039;,                      // label axes
        chxl: &#039;0:|&#039; + labels.join(&#039;|&#039;), // labels
        chsp: &#039;0,1&#039;,
        chm: markers.join(&#039;|&#039;),         // test names
        chbh: [bw, 0, bs].join(&#039;,&#039;),    // bar widths
        // chf: &#039;bg,lg,0,eeeeee,0,eeeeee,.5,ffffff,1&#039;, // gradient
        chs: w + &#039;x&#039; + h
      };
      return &#039;http://chart.apis.google.com/chart?&#039; + jsl.join(params, &#039;=&#039;, &#039;&amp;&#039;);
    } 
  };

  JSLitmus._init();
})();</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
